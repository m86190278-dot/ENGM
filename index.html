<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø°Ø§ÙƒØ±ØªÙŠ | Study Planner</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #2c9c69;
            --secondary: #4a90e2;
            --danger: #e74c3c;
            --warning: #f39c12;
            --bg: #f4f7fa;
            --card: #ffffff;
            --text: #333;
            --radius: 12px;
            --shadow: 0 2px 8px rgba(0,0,0,.08);
        }

        body {
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--card);
            box-shadow: var(--shadow);
            z-index: 1000;
            display: flex;
            justify-content: center;
            padding: 10px;
            gap: 10px;
        }

        .nav-btn {
            padding: 8px 20px;
            border: none;
            background: transparent;
            color: var(--text);
            border-radius: var(--radius);
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .nav-btn:hover, .nav-btn.active {
            background: var(--primary);
            color: white;
        }

        .lang-btn {
            position: fixed;
            top: 10px;
            left: 10px;
            z-index: 1001;
            padding: 8px 16px;
            border: none;
            background: var(--secondary);
            color: #fff;
            border-radius: var(--radius);
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
        }

        header {
            text-align: center;
            padding: 80px 20px 30px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            margin-bottom: 20px;
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.1rem;
            opacity: 0.95;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 15px;
            flex: 1;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .card {
            background: var(--card);
            margin: 20px 0;
            padding: 25px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }

        .card h2 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 1.5rem;
            border-bottom: 2px solid var(--bg);
            padding-bottom: 10px;
        }

        /* Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-box {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 20px;
            border-radius: var(--radius);
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* Ø§Ù„Ø¬Ø¯ÙˆÙ„ */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 15px;
        }

        th, td {
            padding: 12px;
            text-align: center;
            border: 1px solid #e0e0e0;
        }

        th {
            background: #f8f9fa;
            font-weight: 600;
            color: var(--primary);
        }

        td input, td textarea {
            width: 100%;
            border: 1px solid #ddd;
            padding: 8px;
            border-radius: 6px;
            font-size: 14px;
        }

        td textarea {
            resize: vertical;
            min-height: 60px;
        }

        .btn {
            cursor: pointer;
            border: none;
            padding: 10px 20px;
            border-radius: var(--radius);
            font-size: 14px;
            transition: all 0.3s;
            font-weight: 600;
        }

        .btn-primary {
            background: var(--primary);
            color: #fff;
        }

        .btn-primary:hover {
            background: #248a5a;
        }

        .btn-secondary {
            background: var(--secondary);
            color: #fff;
        }

        .btn-secondary:hover {
            background: #3a7bc8;
        }

        .btn-danger {
            background: var(--danger);
            color: #fff;
        }

        .btn-danger:hover {
            background: #c0392b;
        }

        .btn-warning {
            background: var(--warning);
            color: #fff;
        }

        .quote-box {
            text-align: center;
            background: linear-gradient(135deg, #e8f5e9 0%, #e3f2fd 100%);
            border-right: 4px solid var(--primary);
        }

        #motivQuote {
            font-size: 1.3rem;
            color: var(--primary);
            font-weight: bold;
            line-height: 1.8;
        }

        /* Ø§Ù„ØªØ§ÙŠÙ…Ø± */
        .timer-box {
            text-align: center;
        }

        .timer-display {
            font-size: 4rem;
            margin: 20px 0;
            color: var(--primary);
            font-weight: bold;
            font-family: 'Courier New', monospace;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .timer-progress {
            width: 100%;
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            margin: 15px 0;
            overflow: hidden;
        }

        .timer-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transition: width 1s linear;
        }

        .timer-buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
        }

        .timer-buttons .btn {
            flex: 1;
            min-width: 150px;
            max-width: 200px;
        }

        /* Ø§Ù„Ù…ÙÙƒØ±Ø© */
        .notes-container {
            display: grid;
            gap: 15px;
        }

        .note-card {
            background: #fffef0;
            border: 1px solid #f0e6b6;
            border-radius: var(--radius);
            padding: 15px;
            position: relative;
            transition: transform 0.2s;
        }

        .note-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .note-date {
            font-size: 0.8rem;
            color: #999;
            margin-bottom: 8px;
        }

        .note-text {
            font-size: 1rem;
            line-height: 1.6;
            white-space: pre-wrap;
        }

        .note-delete {
            position: absolute;
            top: 10px;
            left: 10px;
            background: var(--danger);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
        }

        .note-input {
            width: 100%;
            min-height: 100px;
            border: 2px solid var(--primary);
            border-radius: var(--radius);
            padding: 15px;
            font-size: 1rem;
            resize: vertical;
            margin-bottom: 10px;
        }

        .note-color-picker {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            align-items: center;
        }

        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.2s;
        }

        .color-option.selected {
            border-color: var(--text);
            transform: scale(1.2);
        }

        /* Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--primary);
            color: #fff;
            padding: 15px 25px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            animation: slideIn 0.5s;
            z-index: 1000;
            max-width: 300px;
        }

        .hidden {
            display: none !important;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        footer {
            text-align: center;
            padding: 20px;
            background: var(--card);
            color: #666;
            margin-top: 20px;
            box-shadow: 0 -2px 8px rgba(0,0,0,.05);
        }

        footer p {
            font-size: 0.9rem;
        }

        .empty-state {
            text-align: center;
            color: #999;
            padding: 20px;
            font-style: italic;
        }

        /* Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
        body.dark-mode {
            --bg: #1a1a2e;
            --card: #16213e;
            --text: #eaeaea;
        }

        body.dark-mode .quote-box {
            background: linear-gradient(135deg, #1e3c2f 0%, #1e3c5a 100%);
        }

        body.dark-mode .note-card {
            background: #0f3460;
            border-color: #1a1a2e;
        }

        @media (max-width: 600px) {
            header h1 {
                font-size: 1.8rem;
            }
            
            .timer-display {
                font-size: 2.5rem;
            }
            
            .timer-buttons .btn {
                min-width: 100%;
            }
            
            th, td {
                padding: 8px;
                font-size: 12px;
            }

            .nav-btn {
                padding: 6px 12px;
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ -->
    <nav class="navbar">
        <button class="nav-btn active" onclick="showPage('home')" data-ar="Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©" data-en="Home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
        <button class="nav-btn" onclick="showPage('timer')" data-ar="Ø§Ù„Ù…Ø¤Ù‚Øª" data-en="Timer">Ø§Ù„Ù…Ø¤Ù‚Øª</button>
        <button class="nav-btn" onclick="showPage('notes')" data-ar="Ø§Ù„Ù…ÙÙƒØ±Ø© ğŸ“" data-en="Notes ğŸ“">Ø§Ù„Ù…ÙÙƒØ±Ø© ğŸ“</button>
    </nav>

    <!-- Ø²Ø± ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ© -->
    <button id="langToggle" class="lang-btn">EN</button>

    <!-- Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© -->
    <header>
        <h1 data-ar="Ù…Ø°Ø§ÙƒØ±ØªÙŠ" data-en="My Study">Ù…Ø°Ø§ÙƒØ±ØªÙŠ</h1>
        <p data-ar="Ø®Ø·Ù‘Ø· Ù„ÙŠÙˆÙ…ÙƒØŒ ÙˆØ­Ù‚Ù‘Ù‚ Ù‡Ø¯ÙÙƒ!" data-en="Plan your day, reach your goal!">Ø®Ø·Ù‘Ø· Ù„ÙŠÙˆÙ…ÙƒØŒ ÙˆØ­Ù‚Ù‘Ù‚ Ù‡Ø¯ÙÙƒ!</p>
    </header>

    <div class="container">
        
        <!-- ========== Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ========== -->
        <div id="home" class="page active">
            
            <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
            <div class="stats-grid">
                <div class="stat-box">
                    <div class="stat-number" id="totalSubjects">0</div>
                    <div class="stat-label" data-ar="Ù…ÙˆØ§Ø¯ Ø§Ù„ÙŠÙˆÙ…" data-en="Today's Subjects">Ù…ÙˆØ§Ø¯ Ø§Ù„ÙŠÙˆÙ…</div>
                </div>
                <div class="stat-box">
                    <div class="stat-number" id="totalNotes">0</div>
                    <div class="stat-label" data-ar="Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ" data-en="Your Notes">Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ</div>
                </div>
                <div class="stat-box">
                    <div class="stat-number" id="studyStreak">1</div>
                    <div class="stat-label" data-ar="Ø£ÙŠØ§Ù… Ø§Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø±ÙŠØ©" data-en="Day Streak">Ø£ÙŠØ§Ù… Ø§Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø±ÙŠØ©</div>
                </div>
            </div>

            <!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø°Ø§ÙƒØ±Ø© -->
            <section class="card">
                <h2 data-ar="Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø°Ø§ÙƒØ±Ø© Ø§Ù„ÙŠÙˆÙ…ÙŠ" data-en="Daily Study Schedule">Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø°Ø§ÙƒØ±Ø© Ø§Ù„ÙŠÙˆÙ…ÙŠ</h2>
                <div style="overflow-x: auto;">
                    <table id="scheduleTable">
                        <thead>
                            <tr>
                                <th data-ar="Ø§Ù„Ù…Ø§Ø¯Ø©" data-en="Subject">Ø§Ù„Ù…Ø§Ø¯Ø©</th>
                                <th data-ar="Ø§Ù„ÙˆÙ‚Øª" data-en="Time">Ø§Ù„ÙˆÙ‚Øª</th>
                                <th data-ar="Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª" data-en="Notes">Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>
                                <th data-ar="Ø­Ø°Ù" data-en="Delete">Ø­Ø°Ù</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody"></tbody>
                    </table>
                    <div id="emptyState" class="empty-state hidden" data-ar="Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙˆØ§Ø¯ Ù…Ø¶Ø§ÙØ© Ø¨Ø¹Ø¯" data-en="No subjects added yet">
                        Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙˆØ§Ø¯ Ù…Ø¶Ø§ÙØ© Ø¨Ø¹Ø¯
                    </div>
                </div>
                <button id="addRowBtn" class="btn btn-primary" data-ar="+ Ø¥Ø¶Ø§ÙØ© Ù…Ø§Ø¯Ø© Ø¬Ø¯ÙŠØ¯Ø©" data-en="+ Add New Subject">+ Ø¥Ø¶Ø§ÙØ© Ù…Ø§Ø¯Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
            </section>

            <!-- Ø¬Ù…Ù„Ø© ØªØ­ÙÙŠØ²ÙŠØ© -->
            <section class="card quote-box">
                <p id="motivQuote">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
            </section>
        </div>

        <!-- ========== ØµÙØ­Ø© Ø§Ù„Ù…Ø¤Ù‚Øª ========== -->
        <div id="timer" class="page">
            <section class="card timer-box">
                <h2 data-ar="Ù…Ø¤Ù‚Ù‘Øª Ø§Ù„Ù…Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ø°ÙƒÙŠ" data-en="Smart Study Timer">Ù…Ø¤Ù‚Ù‘Øª Ø§Ù„Ù…Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ø°ÙƒÙŠ</h2>
                
                <div class="timer-display" id="timerDisplay">25:00</div>
                
                <div class="timer-progress">
                    <div class="timer-progress-bar" id="timerProgress" style="width: 100%"></div>
                </div>

                <div class="timer-buttons">
                    <button id="startStudy" class="btn btn-primary" data-ar="ğŸ¯ Ù…Ø°Ø§ÙƒØ±Ø© (25 Ø¯)" data-en="ğŸ¯ Study (25 min)">ğŸ¯ Ù…Ø°Ø§ÙƒØ±Ø© (25 Ø¯)</button>
                    <button id="startBreak" class="btn btn-secondary" data-ar="â˜• Ø§Ø³ØªØ±Ø§Ø­Ø© (5 Ø¯)" data-en="â˜• Break (5 min)">â˜• Ø§Ø³ØªØ±Ø§Ø­Ø© (5 Ø¯)</button>
                    <button id="startLongBreak" class="btn btn-warning" data-ar="ğŸŒŸ Ø§Ø³ØªØ±Ø§Ø­Ø© Ø·ÙˆÙŠÙ„Ø© (15 Ø¯)" data-en="ğŸŒŸ Long Break (15 min)">ğŸŒŸ Ø§Ø³ØªØ±Ø§Ø­Ø© Ø·ÙˆÙŠÙ„Ø© (15 Ø¯)</button>
                    <button id="resetTimer" class="btn btn-danger" data-ar="â¹ Ø¥ÙŠÙ‚Ø§Ù" data-en="â¹ Stop">â¹ Ø¥ÙŠÙ‚Ø§Ù</button>
                </div>

                <div style="margin-top: 20px; text-align: center; color: #666; font-size: 0.9rem;">
                    <span data-ar="Ø¹Ø¯Ø¯ Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„ÙŠÙˆÙ…: " data-en="Sessions today: ">Ø¹Ø¯Ø¯ Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„ÙŠÙˆÙ…: </span>
                    <strong id="sessionCount">0</strong>
                </div>
            </section>
        </div>

        <!-- ========== ØµÙØ­Ø© Ø§Ù„Ù…ÙÙƒØ±Ø© ========== -->
        <div id="notes" class="page">
            <section class="card">
                <h2 data-ar="ğŸ“ Ù…ÙÙƒØ±ØªÙŠ" data-en="ğŸ“ My Notebook">ğŸ“ Ù…ÙÙƒØ±ØªÙŠ</h2>
                
                <div class="note-color-picker">
                    <span data-ar="Ù„ÙˆÙ† Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©:" data-en="Note color:">Ù„ÙˆÙ† Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©:</span>
                    <div class="color-option selected" style="background: #fffef0" data-color="#fffef0" onclick="selectColor(this)"></div>
                    <div class="color-option" style="background: #ffe0e0" data-color="#ffe0e0" onclick="selectColor(this)"></div>
                    <div class="color-option" style="background: #e0f7fa" data-color="#e0f7fa" onclick="selectColor(this)"></div>
                    <div class="color-option" style="background: #f3e5f5" data-color="#f3e5f5" onclick="selectColor(this)"></div>
                    <div class="color-option" style="background: #e8f5e9" data-color="#e8f5e9" onclick="selectColor(this)"></div>
                </div>

                <textarea id="noteInput" class="note-input" data-ar="Ø§ÙƒØªØ¨ Ù…Ù„Ø§Ø­Ø¸ØªÙƒ Ù‡Ù†Ø§..." data-en="Write your note here..." placeholder="Ø§ÙƒØªØ¨ Ù…Ù„Ø§Ø­Ø¸ØªÙƒ Ù‡Ù†Ø§..."></textarea>
                
                <button onclick="addNote()" class="btn btn-primary" data-ar="ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©" data-en="ğŸ’¾ Save Note">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©</button>
            </section>

            <section class="card">
                <h2 data-ar="Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙŠ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©" data-en="My Previous Notes">Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙŠ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©</h2>
                <div id="notesContainer" class="notes-container">
                    <div class="empty-state" data-ar="Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¨Ø¹Ø¯" data-en="No notes yet">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¨Ø¹Ø¯</div>
                </div>
            </section>
        </div>

    </div>

    <!-- Ø¥Ø´Ø¹Ø§Ø±Ø§Øª -->
    <div id="notification" class="notification hidden"></div>

    <!-- Ø§Ù„ÙÙˆØªØ± -->
    <footer>
        <p data-ar="ØªÙ… ØµÙ†Ø¹ Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ù† Ø§Ù„Ø·Ø§Ù„Ø¨ Ø¨Ø§Ø³Ù…" data-en="Made by student Basem">ØªÙ… ØµÙ†Ø¹ Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ù† Ø§Ù„Ø·Ø§Ù„Ø¨ Ø¨Ø§Ø³Ù…</p>
    </footer>

    <script>
        // ==================== Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ù…ØªØºÙŠØ±Ø§Øª ====================
        let lang = localStorage.getItem('lang') || 'ar';
        let timerInterval = null;
        let seconds = 25 * 60;
        let isRunning = false;
        let totalSeconds = 25 * 60;
        let selectedNoteColor = '#fffef0';

        // Ø§Ù„Ø¬Ù…Ù„ Ø§Ù„ØªØ­ÙÙŠØ²ÙŠØ©
        const quotes = {
            ar: [
                "Ø§Ù„Ù†Ø¬Ø§Ø­ Ù„Ø§ ÙŠØ£ØªÙŠ Ù…Ù† Ø§Ù„Ø±Ø§Ø­Ø©ØŒ Ø¨Ù„ Ù…Ù† Ø§Ù„Ù…Ø«Ø§Ø¨Ø±Ø©.",
                "Ø«Ø§Ù†ÙˆÙŠØªÙƒ ÙØ±ØµØªÙƒ Ù„Ø¨Ù†Ø§Ø¡ Ù…Ø³ØªÙ‚Ø¨Ù„ÙƒØŒ Ù„Ø§ ØªØ¶ÙŠÙ‘Ø¹Ù‡Ø§.",
                "ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø© Ù…Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ø¢Ù† = Ø³Ø§Ø¹Ø© Ø±Ø§Ø­Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹.",
                "Ø§Ù„Ø°ÙƒØ§Ø¡ Ù‡Ùˆ Ù…Ø§ ØªØµÙ†Ø¹Ù‡ Ù…Ù† Ù…Ø¬Ù‡ÙˆØ¯ÙƒØŒ Ù„Ø§ Ù…Ø§ ØªÙˆÙ„Ø¯ Ø¨Ù‡.",
                "Ø§ØµØ¨Ø± ØªÙØ¬Ø¨Ø±ØŒ ÙˆØ§Ø¬ØªÙ‡Ø§Ø¯Ùƒ Ù„Ù† ÙŠØ¶ÙŠØ¹ Ø³Ø¯Ù‰.",
                "Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ Ù„Ù…Ù† ÙŠÙØ¹Ø¯Ù‘ Ù„Ù‡ Ø§Ù„ÙŠÙˆÙ….",
                "Ø§Ù„ØªÙ…ÙŠØ² ÙŠØ­ØªØ§Ø¬ Ù‚Ø±Ø§Ø±Ø§Ù‹ØŒ ÙˆØ§Ù„Ù‚Ø±Ø§Ø± ÙŠØ­ØªØ§Ø¬ Ø¨Ø¯Ø§ÙŠØ©.",
                "Ù„Ø§ ØªÙ†ØªØ¸Ø± Ø§Ù„ÙØ±ØµØ©ØŒ Ø§ØµÙ†Ø¹Ù‡Ø§ Ø¨Ù…Ø°Ø§ÙƒØ±ØªÙƒ.",
                "Ø§Ù„Ø·Ø±ÙŠÙ‚ Ø¥Ù„Ù‰ Ø§Ù„Ø¬Ø§Ù…Ø¹Ø© ÙŠØ¨Ø¯Ø£ Ø¨Ù…Ø°Ø§ÙƒØ±Ø© Ø§Ù„ÙŠÙˆÙ….",
                "Ø£Ù†Øª Ù‚Ø§Ø¯Ø± Ø¹Ù„Ù‰ ØªØ­Ù‚ÙŠÙ‚ Ù…Ø§ ØªØªÙ…Ù†Ù‰ØŒ ÙÙ‚Ø· Ø§Ø¨Ø¯Ø£."
            ],
            en: [
                "Success doesn't come from comfort, it comes from persistence.",
                "High school is your chance to build your future, don't waste it.",
                "Every minute you study now = an hour of rest later.",
                "Intelligence is what you make of your effort, not what you're born with.",
                "Be patient and strive; your effort will never be wasted.",
                "The future belongs to those who prepare for it today.",
                "Excellence needs a decision, and a decision needs a start.",
                "Don't wait for opportunity, create it with your studies.",
                "The road to university starts with today's study.",
                "You are capable of achieving what you dream, just start."
            ]
        };

        // ==================== Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„ØµÙØ­Ø§Øª ====================
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            
            document.getElementById(pageId).classList.add('active');
            event.target.classList.add('active');
            
            if (pageId === 'home') {
                updateStats();
            }
        }

        // ==================== Ø§Ù„Ù„ØºØ© ====================
        function toggleLanguage() {
            lang = lang === 'ar' ? 'en' : 'ar';
            localStorage.setItem('lang', lang);
            applyLanguage();
            showRandomQuote();
            loadNotes();
        }

        function applyLanguage() {
            document.documentElement.lang = lang;
            document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
            
            document.querySelectorAll('[data-ar][data-en]').forEach(el => {
                if (el.hasAttribute('placeholder')) {
                    el.placeholder = lang === 'ar' ? el.dataset.ar : el.dataset.en;
                } else {
                    el.textContent = lang === 'ar' ? el.dataset.ar : el.dataset.en;
                }
            });

            document.getElementById('langToggle').textContent = lang === 'ar' ? 'EN' : 'AR';
        }

        // ==================== Ø§Ù„ØªØ­ÙÙŠØ² ====================
        function showRandomQuote() {
            const quotesList = quotes[lang];
            const randomIndex = Math.floor(Math.random() * quotesList.length);
            document.getElementById('motivQuote').textContent = quotesList[randomIndex];
        }

        // ==================== Ø§Ù„Ø¬Ø¯ÙˆÙ„ ====================
        function addRow() {
            const tbody = document.getElementById('tableBody');
            const row = document.createElement('tr');
            row.innerHTML = `
                <td><input type="text" placeholder="${lang === 'ar' ? 'Ù…Ø«Ø§Ù„: Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª' : 'e.g. Math'}"></td>
                <td><input type="time"></td>
                <td><textarea placeholder="${lang === 'ar' ? 'Ø£Ù‡Ø¯Ø§Ù Ø§Ù„ÙŠÙˆÙ…...' : 'Today\'s goals...'}"></textarea></td>
                <td><button class="btn btn-danger" onclick="deleteRow(this)">${lang === 'ar' ? 'Ø­Ø°Ù' : 'Delete'}</button></td>
            `;
            tbody.appendChild(row);
            updateEmptyState();
            saveData();
            updateStats();
        }

        function deleteRow(btn) {
            btn.closest('tr').remove();
            updateEmptyState();
            saveData();
            updateStats();
        }

        function updateEmptyState() {
            const tbody = document.getElementById('tableBody');
            const emptyState = document.getElementById('emptyState');
            const hasRows = tbody.children.length > 0;
            emptyState.classList.toggle('hidden', hasRows);
        }

        function saveData() {
            const rows = [];
            document.querySelectorAll('#tableBody tr').forEach(row => {
                rows.push({
                    subject: row.cells[0].querySelector('input').value,
                    time: row.cells[1].querySelector('input').value,
                    notes: row.cells[2].querySelector('textarea').value
                });
            });
            localStorage.setItem('scheduleData', JSON.stringify(rows));
        }

        function loadData() {
            const data = JSON.parse(localStorage.getItem('scheduleData') || '[]');
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';
            
            data.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><input type="text" value="${item.subject || ''}" placeholder="${lang === 'ar' ? 'Ù…Ø«Ø§Ù„: Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª' : 'e.g. Math'}"></td>
                    <td><input type="time" value="${item.time || ''}"></td>
                    <td><textarea placeholder="${lang === 'ar' ? 'Ø£Ù‡Ø¯Ø§Ù Ø§Ù„ÙŠÙˆÙ…...' : 'Today\'s goals...'}">${item.notes || ''}</textarea></td>
                    <td><button class="btn btn-danger" onclick="deleteRow(this)">${lang === 'ar' ? 'Ø­Ø°Ù' : 'Delete'}</button></td>
                `;
                tbody.appendChild(row);
            });
            
            updateEmptyState();
            updateStats();
        }

        // ==================== Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ====================
        function updateStats() {
            const subjects = document.querySelectorAll('#tableBody tr').length;
            const notes = JSON.parse(localStorage.getItem('notesData') || '[]').length;
            
            document.getElementById('totalSubjects').textContent = subjects;
            document.getElementById('totalNotes').textContent = notes;
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø±ÙŠØ©
            const lastVisit = localStorage.getItem('lastVisit');
            const today = new Date().toDateString();
            let streak = parseInt(localStorage.getItem('streak') || '1');
            
            if (lastVisit) {
                const lastDate = new Date(lastVisit);
                const diffDays = Math.floor((new Date() - lastDate) / (1000 * 60 * 60 * 24));
                
                if (diffDays === 1) {
                    streak++;
                } else if (diffDays > 1) {
                    streak = 1;
                }
            }
            
            localStorage.setItem('lastVisit', today);
            localStorage.setItem('streak', streak);
            document.getElementById('studyStreak').textContent = streak;
        }

        // ==================== Ø§Ù„ØªØ§ÙŠÙ…Ø± ====================
        function updateTimerDisplay() {
            const minutes = Math.floor(seconds / 60);
            const secs = seconds % 60;
            document.getElementById('timerDisplay').textContent = 
                `${String(minutes).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
            
            // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
            const progress = (seconds / totalSeconds) * 100;
            document.getElementById('timerProgress').style.width = `${progress}%`;
        }

        function startTimer(minutes, type) {
            if (isRunning) clearInterval(timerInterval);
            
            seconds = minutes * 60;
            totalSeconds = seconds;
            isRunning = true;
            updateTimerDisplay();
            
            timerInterval = setInterval(() => {
                seconds--;
                updateTimerDisplay();
                
                if (seconds <= 0) {
                    clearInterval(timerInterval);
                    isRunning = false;
                    
                    let message;
                    if (type === 'study') {
                        message = lang === 'ar' ? 'ğŸ‰ Ø§Ù†ØªÙ‡Øª ÙØªØ±Ø© Ø§Ù„Ù…Ø°Ø§ÙƒØ±Ø©! Ø­Ø§Ù† ÙˆÙ‚Øª Ø§Ù„Ø§Ø³ØªØ±Ø§Ø­Ø©' : 'ğŸ‰ Study session over! Time for a break';
                        incrementSessionCount();
                    } else if (type === 'break') {
                        message = lang === 'ar' ? 'â˜• Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø§Ø³ØªØ±Ø§Ø­Ø©! Ø§Ø³ØªØ¹Ø¯ Ù„Ù„Ù…Ø°Ø§ÙƒØ±Ø©' : 'â˜• Break over! Ready to study';
                    } else {
                        message = lang === 'ar' ? 'ğŸŒŸ Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø§Ø³ØªØ±Ø§Ø­Ø© Ø§Ù„Ø·ÙˆÙŠÙ„Ø©! Ø¬Ø§Ù‡Ø² Ù„Ù„Ù…Ø°Ø§ÙƒØ±Ø©ØŸ' : 'ğŸŒŸ Long break over! Ready to study?';
                    }
                    
                    showNotification(message);
                }
            }, 1000);
        }

        function resetTimer() {
            clearInterval(timerInterval);
            isRunning = false;
            seconds = 25 * 60;
            totalSeconds = seconds;
            updateTimerDisplay();
        }

        function incrementSessionCount() {
            const count = parseInt(localStorage.getItem('sessionCount') || '0') + 1;
            localStorage.setItem('sessionCount', count);
            document.getElementById('sessionCount').textContent = count;
        }

        // ==================== Ø§Ù„Ù…ÙÙƒØ±Ø© ====================
        function selectColor(element) {
            document.querySelectorAll('.color-option').forEach(c => c.classList.remove('selected'));
            element.classList.add('selected');
            selectedNoteColor = element.dataset.color;
        }

        function addNote() {
            const input = document.getElementById('noteInput');
            const text = input.value.trim();
            
            if (!text) {
                showNotification(lang === 'ar' ? 'âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ù…Ù„Ø§Ø­Ø¸Ø© Ø£ÙˆÙ„Ø§Ù‹' : 'âš ï¸ Please write a note first');
                return;
            }
            
            const notes = JSON.parse(localStorage.getItem('notesData') || '[]');
            const note = {
                id: Date.now(),
                text: text,
                color: selectedNoteColor,
                date: new Date().toLocaleString(lang === 'ar' ? 'ar-EG' : 'en-US')
            };
            
            notes.unshift(note);
            localStorage.setItem('notesData', JSON.stringify(notes));
            
            input.value = '';
            loadNotes();
            updateStats();
            showNotification(lang === 'ar' ? 'âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© Ø¨Ù†Ø¬Ø§Ø­' : 'âœ… Note saved successfully');
        }

        function loadNotes() {
            const notes = JSON.parse(localStorage.getItem('notesData') || '[]');
            const container = document.getElementById('notesContainer');
            
            if (notes.length === 0) {
                container.innerHTML = `<div class="empty-state">${lang === 'ar' ? 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¨Ø¹Ø¯' : 'No notes yet'}</div>`;
                return;
            }
            
            container.innerHTML = notes.map(note => `
                <div class="note-card" style="background: ${note.color}">
                    <button class="note-delete" onclick="deleteNote(${note.id})">ğŸ—‘ï¸</button>
                    <div class="note-date">${note.date}</div>
                    <div class="note-text">${escapeHtml(note.text)}</div>
                </div>
            `).join('');
        }

        function deleteNote(id) {
            let notes = JSON.parse(localStorage.getItem('notesData') || '[]');
            notes = notes.filter(n => n.id !== id);
            localStorage.setItem('notesData', JSON.stringify(notes));
            loadNotes();
            updateStats();
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // ==================== Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ====================
        function showNotification(message) {
            if ('Notification' in window && Notification.permission === 'granted') {
                new Notification(lang === 'ar' ? 'Ù…Ø°Ø§ÙƒØ±ØªÙŠ ğŸ“š' : 'My Study ğŸ“š', {
                    body: message,
                    icon: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">ğŸ“š</text></svg>'
                });
            }

            const notif = document.getElementById('notification');
            notif.textContent = message;
            notif.classList.remove('hidden');
            
            setTimeout(() => notif.classList.add('hidden'), 5000);
        }

        function checkDailyReminder() {
            const now = new Date();
            const hours = now.getHours();
            const lastReminder = localStorage.getItem('lastReminder');
            const today = now.toDateString();
            
            if (hours >= 10 && lastReminder !== today) {
                localStorage.setItem('lastReminder', today);
                const message = lang === 'ar' 
                    ? 'ğŸ“š ØªØ°ÙƒÙŠØ± ÙŠÙˆÙ…ÙŠ: Ø±Ø§Ø¬Ø¹ Ø¬Ø¯ÙˆÙ„ Ù…Ø°Ø§ÙƒØ±ØªÙƒ ÙˆØ£Ù†Ø¬Ø² Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…!'
                    : 'ğŸ“š Daily reminder: Review your schedule and finish today\'s tasks!';
                showNotification(message);
            }
        }

        // ==================== Ø§Ù„Ø£Ø­Ø¯Ø§Ø« ====================
        document.getElementById('langToggle').addEventListener('click', toggleLanguage);
        document.getElementById('addRowBtn').addEventListener('click', addRow);
        document.getElementById('tableBody').addEventListener('input', saveData);
        
        document.getElementById('startStudy').addEventListener('click', () => startTimer(25, 'study'));
        document.getElementById('startBreak').addEventListener('click', () => startTimer(5, 'break'));
        document.getElementById('startLongBreak').addEventListener('click', () => startTimer(15, 'longBreak'));
        document.getElementById('resetTimer').addEventListener('click', resetTimer);

        // ==================== Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø£ÙˆÙ„ÙŠ ====================
        applyLanguage();
        loadData();
        loadNotes();
        showRandomQuote();
        updateTimerDisplay();
        updateStats();
        
        document.getElementById('sessionCount').textContent = localStorage.getItem('sessionCount') || '0';

        if ('Notification' in window && Notification.permission === 'default') {
            Notification.requestPermission();
        }

        setInterval(checkDailyReminder, 60000);
        checkDailyReminder();
    </script>
</body>
</html>
